Test (2B): no agreement if too many followers disconnect ...
008142 TIMR S2 Start Leader Election
008143 TIMR C2 Send Request Vote for S4
008144 TIMR C2 Send Request Vote for S1
008145 TIMR C2 Send Request Vote for S3
008145 TIMR C2 Send Request Vote for S0
008147 VOTE C2 asking for vote, T1
008147 TERM S4 update term T1
008147 VOTE Request Vote args(LastLogTerm 1, LastLogIndex 0), rf(LastLogTerm 0, LastLogIndex 0)
008147 VOTE C2 asking for vote, T1
008147 TERM S1 update term T1
008148 VOTE Request Vote args(LastLogTerm 1, LastLogIndex 0), rf(LastLogTerm 0, LastLogIndex 0)
008148 VOTE S1 Vote for S2
008148 VOTE C2 asking for vote, T1
008148 TERM S3 update term T1
008148 VOTE Request Vote args(LastLogTerm 1, LastLogIndex 0), rf(LastLogTerm 0, LastLogIndex 0)
008148 VOTE S3 Vote for S2
008147 VOTE S4 Vote for S2
008149 LEAD S2 Achieved Majority for T1 (3), converting to Leader
008147 VOTE C2 asking for vote, T1
008149 TERM S0 update term T1
008149 VOTE Request Vote args(LastLogTerm 1, LastLogIndex 0), rf(LastLogTerm 0, LastLogIndex 0)
008149 VOTE S0 Vote for S2


----------------  Start(10)  -------------------
008614 LEAD L2 Start agreement
008617 LOG1 S3 Receive Append Entry E(0,0)
008618 LOG1 S3 replicate the entry from L2, Now the Log length is 2
008617 LOG1 S1 Receive Append Entry E(0,0)
008618 LOG1 S1 replicate the entry from L2, Now the Log length is 2
008619 LOG1 S4 Receive Append Entry E(0,0)
008619 LOG1 S4 replicate the entry from L2, Now the Log length is 2
008618 LOG1 S0 Receive Append Entry E(0,0)
008619 LOG1 S0 replicate the entry from L2, Now the Log length is 2
008619 LEAD L2 Achieved Majority of servers commited the entry at 1


----------------  Start(20) ----------------------
013533 LEAD L2 Start agreement
013535 LOG1 S1 Receive Append Entry E(1,1)
013536 LOG1 S1 replicate the entry from L2, Now the Log length is 3
021954 TIMR S4 Start Leader Election
021955 TIMR C4 Send Request Vote for S3
021955 TIMR C4 Send Request Vote for S1
021955 TIMR C4 Send Request Vote for S2
021955 TIMR C4 Send Request Vote for S0
023696 TIMR S3 Start Leader Election
023698 TIMR C3 Send Request Vote for S4
023698 TIMR C3 Send Request Vote for S1
023699 TIMR C3 Send Request Vote for S0
023698 TIMR C3 Send Request Vote for S2
026167 TIMR S0 Start Leader Election
026167 TIMR C0 Send Request Vote for S4
026168 TIMR C0 Send Request Vote for S3
026168 TIMR C0 Send Request Vote for S2
026168 TIMR C0 Send Request Vote for S1
030215 TIMR S3 Can't Send Vote Request to S2
030873 TIMR S4 Can't Send Vote Request to S3
032907 TIMR S3 Start Leader Election
032907 TIMR C3 Send Request Vote for S4
032908 TIMR C3 Send Request Vote for S1
032908 TIMR C3 Send Request Vote for S2
032908 TIMR C3 Send Request Vote for S0
033943 TERM S4 receive outdate Append RPC(1,1) form S2
033945 TERM S0 receive outdate Append RPC(1,1) form S2
033946 TERM S3 receive outdate Append RPC(1,1) form S2
034731 TIMR S2 Start Leader Election
034732 TIMR C2 Send Request Vote for S4
034732 TIMR C2 Send Request Vote for S1
034733 TIMR C2 Send Request Vote for S0
034733 VOTE C2 asking for vote, T2
034734 TIMR C2 Send Request Vote for S3
034734 VOTE C2 asking for vote, T2
034735 TERM S1 update term T2
034734 VOTE C2 asking for vote, T2
034735 VOTE C2 asking for vote, T2
034735 VOTE Request Vote args(LastLogTerm 1, LastLogIndex2), rf(LastLogTerm 1, LastLogIndex 2)
034735 VOTE S1 Vote for S2
034736 LEAD Leader L2 convert to Follower
035382 LOG1 S3 Receive Append Entry E(1,1)
035383 TERM S3 receive outdate Append RPC(1,1) form S2
035575 TIMR S4 Start Leader Election
035576 TIMR C4 Send Request Vote for S3
035577 TIMR C4 Send Request Vote for S1
035577 TIMR C4 Send Request Vote for S0
035578 TIMR C4 Send Request Vote for S2
035578 VOTE C4 asking for vote, T3
035578 TERM S1 update term T3
035578 VOTE Request Vote args(LastLogTerm 1, LastLogIndex1), rf(LastLogTerm 1, LastLogIndex 2)
035579 VOTE C4 asking for vote, T3
035579 TERM S0 update term T3
035579 VOTE Request Vote args(LastLogTerm 1, LastLogIndex1), rf(LastLogTerm 1, LastLogIndex 1)
035579 VOTE S0 Vote for S4
035579 VOTE C4 asking for vote, T3
035579 TERM S2 update term T3
035579 VOTE Request Vote args(LastLogTerm 1, LastLogIndex1), rf(LastLogTerm 1, LastLogIndex 2)
035578 VOTE C4 asking for vote, T3
041167 TIMR S3 Start Leader Election
041168 TIMR C3 Send Request Vote for S4
041168 TIMR C3 Send Request Vote for S1
041169 TIMR C3 Send Request Vote for S2
041169 VOTE C3 asking for vote, T4
041169 TERM S4 update term T4
041169 VOTE Request Vote args(LastLogTerm 1, LastLogIndex1), rf(LastLogTerm 1, LastLogIndex 1)
041169 VOTE S4 Vote for S3
041170 TIMR C3 Send Request Vote for S0
041169 VOTE C3 asking for vote, T4
041170 TERM S1 update term T4
041170 VOTE Request Vote args(LastLogTerm 1, LastLogIndex1), rf(LastLogTerm 1, LastLogIndex 2)
041170 VOTE C3 asking for vote, T4
041171 TERM S2 update term T4
041171 VOTE Request Vote args(LastLogTerm 1, LastLogIndex1), rf(LastLogTerm 1, LastLogIndex 2)
041178 VOTE C3 asking for vote, T4
041178 TERM S0 update term T4
041178 VOTE Request Vote args(LastLogTerm 1, LastLogIndex1), rf(LastLogTerm 1, LastLogIndex 1)
041178 VOTE S0 Vote for S3
041179 LEAD S3 Achieved Majority for T4 (3), converting to Leader
042922 LEAD L3 Start agreement
042923 LEAD L3 Start agreement
042924 LOG1 S4 Receive Append Entry E(1,1)
042925 LOG1 S4 replicate the entry from L3, Now the Log length is 3
042925 LOG1 S2 Receive Append Entry E(1,1)
042925 LOG1 S2 replicate the entry from L3, Now the Log length is 3
042925 LOG1 S1 Receive Append Entry E(1,1)
042926 LOG1 S1 replicate the entry from L3, Now the Log length is 3
042926 LOG1 S1 Receive Append Entry E(1,1)
042926 LOG1 S1 replicate the entry from L3, Now the Log length is 3
042925 LOG1 S0 Receive Append Entry E(1,1)
042926 LOG1 S0 replicate the entry from L3, Now the Log length is 3
042926 LEAD L3 Achieved Majority of servers commited the entry at 2
042926 LOG1 S2 Receive Append Entry E(2,4)
042926 LOG1 S2 replicate the entry from L3, Now the Log length is 4
042926 LOG1 S0 Receive Append Entry E(1,1)
042927 LOG1 S0 replicate the entry from L3, Now the Log length is 3
042927 LEAD L3 Achieved Majority of servers commited the entry at 3
042927 LOG1 S4 Receive Append Entry E(1,1)
042927 LOG1 S4 replicate the entry from L3, Now the Log length is 3
043984 LOG1 S0 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
043984 LOG1 S3 Args(PrevLogIndex 3), S0 (LastIndex 2)
043985 LOG1 S4 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
043985 LOG1 S3 Args(PrevLogIndex 3), S4 (LastIndex 2)
043985 LOG1 S1 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
043985 LOG1 S3 Args(PrevLogIndex 3), S1 (LastIndex 2)
045242 LOG1 S4 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
045242 LOG1 S3 Args(PrevLogIndex 3), S4 (LastIndex 2)
045242 LOG1 S1 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
045243 LOG1 S3 Args(PrevLogIndex 3), S1 (LastIndex 2)
045243 LOG1 S0 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
045243 LOG1 S3 Args(PrevLogIndex 3), S0 (LastIndex 2)
046504 LOG1 S4 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
046504 LOG1 S3 Args(PrevLogIndex 3), S4 (LastIndex 2)
046504 LOG1 S0 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
046505 LOG1 S3 Args(PrevLogIndex 3), S0 (LastIndex 2)
046505 LOG1 S1 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
046505 LOG1 S3 Args(PrevLogIndex 3), S1 (LastIndex 2)
047277 TIMR S3 Can't Send Vote Request to S2
047760 LOG1 S4 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
047761 LOG1 S3 Args(PrevLogIndex 3), S4 (LastIndex 2)
047761 LOG1 S0 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
047761 LOG1 S3 Args(PrevLogIndex 3), S0 (LastIndex 2)
047760 LOG1 S1 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
047761 LOG1 S3 Args(PrevLogIndex 3), S1 (LastIndex 2)
049022 LOG1 S1 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
049022 LOG1 S3 Args(PrevLogIndex 3), S1 (LastIndex 2)
049022 LOG1 S4 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
049023 LOG1 S3 Args(PrevLogIndex 3), S4 (LastIndex 2)
049022 LOG1 S0 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
049024 LOG1 S3 Args(PrevLogIndex 3), S0 (LastIndex 2)
050282 LOG1 S4 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
050282 LOG1 S3 Args(PrevLogIndex 3), S4 (LastIndex 2)
050282 LOG1 S0 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
050283 LOG1 S3 Args(PrevLogIndex 3), S0 (LastIndex 2)
050282 LOG1 S1 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
050283 LOG1 S3 Args(PrevLogIndex 3), S1 (LastIndex 2)
051535 LOG1 S4 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
051536 LOG1 S3 Args(PrevLogIndex 3), S4 (LastIndex 2)
051536 LOG1 S0 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
051536 LOG1 S3 Args(PrevLogIndex 3), S0 (LastIndex 2)
051536 LOG1 S1 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
051536 LOG1 S3 Args(PrevLogIndex 3), S1 (LastIndex 2)
052789 LOG1 S4 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
052790 LOG1 S3 Args(PrevLogIndex 3), S4 (LastIndex 2)
052790 LOG1 S0 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
052790 LOG1 S3 Args(PrevLogIndex 3), S0 (LastIndex 2)
052789 LOG1 S1 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
052791 LOG1 S3 Args(PrevLogIndex 3), S1 (LastIndex 2)
054040 LOG1 S1 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
054041 LOG1 S3 Args(PrevLogIndex 3), S1 (LastIndex 2)
054041 LOG1 S0 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
054041 LOG1 S3 Args(PrevLogIndex 3), S0 (LastIndex 2)
054041 LOG1 S4 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
054041 LOG1 S3 Args(PrevLogIndex 3), S4 (LastIndex 2)
054238 TIMR S0 Can't Send Vote Request to S2
055298 LOG1 S0 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
055299 LOG1 S3 Args(PrevLogIndex 3), S0 (LastIndex 2)
055298 LOG1 S1 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
055300 LOG1 S3 Args(PrevLogIndex 3), S1 (LastIndex 2)
055298 LOG1 S4 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
055300 LOG1 S3 Args(PrevLogIndex 3), S4 (LastIndex 2)
056554 LOG1 S4 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
056554 LOG1 S3 Args(PrevLogIndex 3), S4 (LastIndex 2)
056554 LOG1 S0 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
056555 LOG1 S3 Args(PrevLogIndex 3), S0 (LastIndex 2)
056554 LOG1 S1 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
056555 LOG1 S3 Args(PrevLogIndex 3), S1 (LastIndex 2)
057813 LOG1 S4 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
057813 LOG1 S3 Args(PrevLogIndex 3), S4 (LastIndex 2)
057814 LOG1 S1 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
057814 LOG1 S3 Args(PrevLogIndex 3), S1 (LastIndex 2)
057815 LOG1 S0 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
057815 LOG1 S3 Args(PrevLogIndex 3), S0 (LastIndex 2)
059068 LOG1 S4 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
059069 LOG1 S3 Args(PrevLogIndex 3), S4 (LastIndex 2)
059068 LOG1 S1 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
059069 LOG1 S3 Args(PrevLogIndex 3), S1 (LastIndex 2)
059070 LOG1 S0 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
059070 LOG1 S3 Args(PrevLogIndex 3), S0 (LastIndex 2)
060325 LOG1 S4 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
060326 LOG1 S3 Args(PrevLogIndex 3), S4 (LastIndex 2)
060326 LOG1 S0 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
060326 LOG1 S3 Args(PrevLogIndex 3), S0 (LastIndex 2)
060325 LOG1 S1 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
060326 LOG1 S3 Args(PrevLogIndex 3), S1 (LastIndex 2)
061044 TIMR S0 Can't Send Vote Request to S1
061578 LOG1 S4 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
061579 LOG1 S3 Args(PrevLogIndex 3), S4 (LastIndex 2)
061579 LOG1 S1 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
061579 LOG1 S3 Args(PrevLogIndex 3), S1 (LastIndex 2)
061578 LOG1 S0 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
061580 LOG1 S3 Args(PrevLogIndex 3), S0 (LastIndex 2)
062841 LOG1 S4 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
062842 LOG1 S1 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
062842 LOG1 S3 Args(PrevLogIndex 3), S1 (LastIndex 2)
062842 LOG1 S3 Args(PrevLogIndex 3), S4 (LastIndex 2)
062843 LOG1 S0 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
062843 LOG1 S3 Args(PrevLogIndex 3), S0 (LastIndex 2)
063104 LEAD L3 Start agreement
063107 LOG1 S4 Receive Append Entry E(3,4)
063107 LOG1 S4 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
063107 LOG1 S1 Receive Append Entry E(3,4)
063108 LOG1 S1 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
063108 LOG1 S3 Args(PrevLogIndex 3), S1 (LastIndex 2)
063108 LOG1 S0 Receive Append Entry E(3,4)
063108 LOG1 S0 Log doesn't contain an entry at prevLogIndex whose term matches prevLogTerm
063108 LOG1 S3 Args(PrevLogIndex 3), S0 (LastIndex 2)
063107 LOG1 S2 Receive Append Entry E(3,4)
063109 LOG1 S2 replicate the entry from L3, Now the Log length is 5
063109 LOG1 S1 Receive Append Entry E(2,4)
063107 LOG1 S3 Args(PrevLogIndex 3), S4 (LastIndex 2)
063115 LOG1 S0 Receive Append Entry E(2,4)
1: log map[1:10]; server map[1:10 2:30 3:1000]
1: log map[1:10]; server map[1:10 2:30 3:1000]
apply error: commit index=2 server=1 1000 != server=3 30
exit status 1
FAIL	6.5840/raft	6.315s
